<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSTU4028003 - H&M vs SHEIN</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* --- 基础设置 --- */
        body { 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            background-color: #F2F0E9;
            color: #1A4D2E;
            scroll-behavior: smooth;
        }
        
        /* --- 动画效果 --- */
        .fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- 滚动条隐藏但允许滚动 --- */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* --- 折叠面板样式优化 --- */
        details > summary { list-style: none; cursor: pointer; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary ~ * { animation: slideDown 0.3s ease-in-out; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- 饼图交互样式 --- */
        .pie-slice {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
            cursor: pointer;
            stroke: #fff;
            stroke-width: 2px;
        }
        .pie-slice:hover {
            transform: scale(1.1);
            filter: drop-shadow(0px 4px 6px rgba(0,0,0,0.1));
            z-index: 10;
        }

        /* --- 策略按钮选中态 --- */
        .strategy-btn.active {
            background-color: #1A4D2E !important;
            color: #F2F0E9 !important;
            border-left-width: 8px !important;
            border-color: #FF2E00 !important;
        }

        /* --- Reflection 步骤条激活态 --- */
        .step-dot.active {
            background-color: #FF2E00 !important;
            border-color: #FF2E00 !important;
            transform: scale(1.2);
            box-shadow: 0 0 0 4px rgba(255, 46, 0, 0.2);
        }
        .step-line.active {
            background-color: #FF2E00;
        }
        
        /* --- 平滑滚动偏移 (防止导航栏遮挡) --- */
        section {
            scroll-margin-top: 80px;
        }
    </style>
</head>
<body class="bg-[#F2F0E9] min-h-screen selection:bg-[#FF2E00] selection:text-white">

    <nav class="fixed top-0 left-0 w-full z-50 bg-[#F2F0E9] border-b-4 border-[#1A4D2E] shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="text-lg font-mono font-bold text-[#1A4D2E] uppercase flex items-center gap-2 cursor-pointer" onclick="document.getElementById('hero').scrollIntoView({behavior: 'smooth'})">
                <div class="w-3 h-3 bg-[#FF2E00] rounded-full animate-pulse"></div>
                MSTU4028003
            </div>
            
            <div class="hidden md:flex gap-6 text-sm font-bold uppercase tracking-widest text-[#1A4D2E]">
                <a href="#context" class="hover:text-[#FF2E00] transition-colors">Context</a>
                <a href="#analysis" class="hover:text-[#FF2E00] transition-colors">Data</a>
                <a href="#syntax" class="hover:text-[#FF2E00] transition-colors text-[#FF2E00]">Syntax Decoder</a>
                <a href="#reflection" class="hover:text-[#FF2E00] transition-colors">Reflections</a>
                <a href="#ai" class="hover:text-[#FF2E00] transition-colors opacity-50">Disclosure</a>
            </div>
        </div>
    </nav>

    <section id="hero" class="min-h-screen pt-24 px-4 flex flex-col justify-center">
        <div class="container mx-auto grid lg:grid-cols-12 gap-8 items-center h-full">
            <div class="lg:col-span-5 relative flex flex-col gap-4 fade-in">
                <div class="relative group transform lg:-rotate-1 hover:rotate-0 transition-transform duration-500 z-10">
                    <img src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" onerror="this.src='https://placehold.co/600x400?text=Fashion+Image+1'" alt="Hero 1" class="w-full h-auto border-4 border-[#1A4D2E] grayscale group-hover:grayscale-0 transition-all shadow-lg">
                    <div class="absolute top-4 left-4 bg-[#FF2E00] text-white px-2 py-1 text-xs font-mono font-bold">FIG 01.</div>
                </div>
                <div class="relative group w-3/4 self-end transform lg:rotate-2 hover:rotate-0 transition-transform duration-500 z-20 -mt-12">
                    <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" onerror="this.src='https://placehold.co/600x400?text=Fashion+Image+2'" alt="Hero 2" class="w-full h-auto border-4 border-[#1A4D2E] grayscale group-hover:grayscale-0 transition-all shadow-lg">
                    <div class="absolute bottom-4 right-4 bg-[#1A4D2E] text-white px-2 py-1 text-xs font-mono font-bold">FIG 02.</div>
                </div>
            </div>

            <div class="lg:col-span-7 pl-0 lg:pl-12 fade-in" style="animation-delay: 0.2s;">
                <div class="mb-12 border-l-8 border-[#FF2E00] pl-8">
                    <h1 class="text-5xl md:text-8xl font-black text-[#1A4D2E] leading-[0.9] tracking-tighter uppercase mb-6">
                        Identity<br>Construction<span class="text-[#FF2E00]">.</span>
                    </h1>
                    <p class="font-mono text-gray-600 max-w-md">
                        A Comparative Critical Discourse Analysis of H&M and SHEIN within Global Capitalism.
                    </p>
                    <p class="font-mono text-xs text-[#1A4D2E] mt-2 font-bold uppercase">By Dengjianing Li</p>
                </div>

                <div class="flex flex-col border-t border-[#1A4D2E]/20">
                    <a href="#context" class="group flex items-baseline w-full text-left py-4 border-b border-[#1A4D2E]/20 hover:bg-[#1A4D2E] hover:text-[#F2F0E9] transition-all px-4 cursor-pointer">
                        <span class="font-mono text-sm mr-6 group-hover:text-[#FF2E00]">01</span>
                        <span class="text-2xl font-black uppercase tracking-tighter flex-grow">Context</span>
                        <i data-lucide="arrow-right" class="opacity-0 group-hover:opacity-100 transition-opacity transform group-hover:-rotate-45"></i>
                    </a>
                    <a href="#analysis" class="group flex items-baseline w-full text-left py-4 border-b border-[#1A4D2E]/20 hover:bg-[#1A4D2E] hover:text-[#F2F0E9] transition-all px-4 cursor-pointer">
                        <span class="font-mono text-sm mr-6 group-hover:text-[#FF2E00]">02</span>
                        <span class="text-2xl font-black uppercase tracking-tighter flex-grow">Data Explorer</span>
                        <i data-lucide="arrow-right" class="opacity-0 group-hover:opacity-100 transition-opacity transform group-hover:-rotate-45"></i>
                    </a>
                    <a href="#syntax" class="group flex items-baseline w-full text-left py-4 border-b border-[#1A4D2E]/20 hover:bg-[#1A4D2E] hover:text-[#F2F0E9] transition-all px-4 cursor-pointer">
                        <span class="font-mono text-sm mr-6 group-hover:text-[#FF2E00]">03</span>
                        <span class="text-2xl font-black uppercase tracking-tighter flex-grow">Syntax Decoder</span>
                        <i data-lucide="arrow-right" class="opacity-0 group-hover:opacity-100 transition-opacity transform group-hover:-rotate-45"></i>
                    </a>
                    <a href="#reflection" class="group flex items-baseline w-full text-left py-4 border-b border-[#1A4D2E]/20 hover:bg-[#1A4D2E] hover:text-[#F2F0E9] transition-all px-4 cursor-pointer">
                        <span class="font-mono text-sm mr-6 group-hover:text-[#FF2E00]">04</span>
                        <span class="text-2xl font-black uppercase tracking-tighter flex-grow">Reflections</span>
                        <i data-lucide="arrow-right" class="opacity-0 group-hover:opacity-100 transition-opacity transform group-hover:-rotate-45"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section id="context" class="py-24 bg-[#1A4D2E] text-[#F2F0E9] px-4">
        <div class="container mx-auto max-w-5xl">
            <div class="mb-12 flex items-center gap-4 opacity-70">
                <i data-lucide="book-open" class="text-[#FF2E00]"></i>
                <span class="font-mono text-sm tracking-widest uppercase">Research Context</span>
            </div>

            <div class="mb-12 relative h-48 border-4 border-[#F2F0E9] overflow-hidden opacity-80">
                <img src="https://images.unsplash.com/photo-1556905055-8f358a7a47b2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" onerror="this.src='https://placehold.co/800x200?text=Context+Image'" class="w-full h-full object-cover grayscale">
                <div class="absolute bottom-2 right-2 bg-[#FF2E00] text-white px-2 py-1 text-xs font-mono font-bold">FIG 03.</div>
            </div>

            <details class="border-b-2 border-[#F2F0E9]/20 mb-4 bg-white/5 group">
                <summary class="flex items-center justify-between p-6 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="flex items-center gap-4">
                        <i data-lucide="search" class="text-[#FF2E00]"></i>
                        <h3 class="text-xl font-black uppercase text-[#F2F0E9]">Research Question</h3>
                    </div>
                    <i data-lucide="chevron-down" class="group-open:rotate-180 transition-transform"></i>
                </summary>
                <div class="p-6 border-t border-dashed border-[#F2F0E9]/30">
                    <div class="border-l-4 border-[#FF2E00] pl-6 py-2">
                        <h2 class="text-2xl md:text-3xl font-black leading-tight">
                            "How do H&M and SHEIN use language in their sustainability reports to construct different forms of sustainable identity within global capitalism?"
                        </h2>
                    </div>
                </div>
            </details>

            <details class="border-b-2 border-[#F2F0E9]/20 mb-4 bg-white/5 group">
                <summary class="flex items-center justify-between p-6 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="flex items-center gap-4">
                        <i data-lucide="layers" class="text-[#FF2E00]"></i>
                        <h3 class="text-xl font-black uppercase text-[#F2F0E9]">Literature Review</h3>
                    </div>
                    <i data-lucide="chevron-down" class="group-open:rotate-180 transition-transform"></i>
                </summary>
                <div class="p-6 border-t border-dashed border-[#F2F0E9]/30 grid md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-black uppercase mb-4 text-[#FF2E00]">Theoretical Framework</h4>
                        <ul class="space-y-4 text-sm font-medium opacity-90">
                            <li class="flex gap-2"><i data-lucide="target" size="16"></i> "Fast fashion relies on harmful production." (Bick 2018)</li>
                            <li class="flex gap-2"><i data-lucide="zap" size="16"></i> "Sustainability is often greenwashing." (Delmas 2011)</li>
                            <li class="flex gap-2"><i data-lucide="file-text" size="16"></i> "Reports are rhetorical tools." (Cho 2015)</li>
                        </ul>
                    </div>
                    <div class="bg-[#F2F0E9] text-[#1A4D2E] p-6 border-l-8 border-[#FF2E00]">
                        <h4 class="font-black uppercase mb-2 text-[#FF2E00]">Research Gap</h4>
                        <p class="text-sm font-bold">"Few studies compare traditional (H&M) vs digital-native (SHEIN) companies."</p>
                    </div>
                </div>
            </details>
        </div>
    </section>

    <section id="analysis" class="py-24 px-4 bg-[#F2F0E9] border-b-4 border-[#1A4D2E]">
        <div class="container mx-auto max-w-6xl">
            <div class="text-center mb-16">
                <span class="bg-[#1A4D2E] text-white px-3 py-1 font-mono text-xs mb-4 inline-block uppercase">Step 01: Micro Level</span>
                <h2 class="text-5xl md:text-7xl font-black text-[#1A4D2E] uppercase tracking-tighter">Data Explorer</h2>
                <p class="font-mono text-gray-500 mt-2">Quantitative Analysis: Vocabulary & Themes (2022-2024)</p>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-8">
                <button onclick="switchBrand('hm')" id="btn-hm" class="p-6 text-left border-t-8 transition-all bg-white shadow-xl border-[#1A4D2E] cursor-pointer">
                    <h3 class="text-3xl font-black text-[#1A4D2E] uppercase">H&M</h3>
                    <p class="text-xs font-mono text-gray-500 mt-1">The Regulator</p>
                </button>
                <button onclick="switchBrand('shein')" id="btn-shein" class="p-6 text-left border-t-8 transition-all bg-[#FF2E00]/5 border-transparent opacity-60 hover:opacity-100 cursor-pointer">
                    <h3 class="text-3xl font-black text-[#FF2E00] uppercase">SHEIN</h3>
                    <p class="text-xs font-mono text-gray-500 mt-1">The Platform</p>
                </button>
            </div>

            <div id="data-panel" class="bg-white p-8 md:p-12 shadow-2xl border-l-8 transition-colors duration-500" style="border-color: #1A4D2E;">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-6">
                    <div>
                        <h4 class="text-sm font-bold uppercase opacity-40 mb-2">Year Selection</h4>
                        <div class="flex gap-2">
                            <button onclick="switchYear('2022')" id="year-2022" class="year-btn px-4 py-2 font-black text-xl border-b-4 transition-all opacity-100 border-current">2022</button>
                            <button onclick="switchYear('2023')" id="year-2023" class="year-btn px-4 py-2 font-black text-xl border-b-4 transition-all opacity-30 border-transparent hover:opacity-60">2023</button>
                            <button onclick="switchYear('2024')" id="year-2024" class="year-btn px-4 py-2 font-black text-xl border-b-4 transition-all opacity-30 border-transparent hover:opacity-60">2024</button>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="block text-xs font-mono uppercase opacity-50">Core Theme</span>
                        <span id="theme-text" class="text-2xl font-black uppercase transition-colors duration-300 text-[#1A4D2E]">Systemic Compliance</span>
                    </div>
                </div>

                <div class="grid md:grid-cols-3 gap-12" id="charts-container">
                    </div>
            </div>
        </div>
    </section>

    <section id="syntax" class="py-24 px-4 bg-white min-h-screen border-b-4 border-[#FF2E00]">
        <div class="container mx-auto max-w-6xl">
             <div class="text-center mb-16">
                <span class="bg-[#FF2E00] text-white px-3 py-1 font-mono text-xs mb-4 inline-block uppercase">Step 02: Meso Level</span>
                <h2 class="text-5xl md:text-7xl font-black text-[#1A4D2E] uppercase tracking-tighter">Syntax Decoder</h2>
                <p class="font-mono text-gray-500 mt-2">Qualitative Analysis: Comparative Rhetorical Strategies</p>
            </div>

            <div class="grid lg:grid-cols-12 gap-8 min-h-[500px]">
                <div class="lg:col-span-4 flex flex-col gap-2">
                    <p class="text-xs font-mono font-bold uppercase text-gray-400 mb-2 px-2">Select a Strategy</p>
                    <button onclick="loadStrategy('voice')" id="btn-voice" class="strategy-btn active p-6 text-left border bg-gray-50 hover:bg-white transition-all rounded shadow-sm group">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-xl font-black uppercase">01. Voice & Agency</span>
                            <i data-lucide="mic" class="opacity-50 group-hover:opacity-100"></i>
                        </div>
                        <p class="text-xs font-mono opacity-60">Who is the subject? (Passive vs. Active)</p>
                    </button>
                    <button onclick="loadStrategy('power')" id="btn-power" class="strategy-btn p-6 text-left border bg-gray-50 hover:bg-white transition-all rounded shadow-sm group border-transparent">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-xl font-black uppercase">02. Power Dynamics</span>
                            <i data-lucide="gavel" class="opacity-50 group-hover:opacity-100"></i>
                        </div>
                        <p class="text-xs font-mono opacity-60">Hierarchy vs. Network (Control vs. Empowerment)</p>
                    </button>
                    <button onclick="loadStrategy('time')" id="btn-time" class="strategy-btn p-6 text-left border bg-gray-50 hover:bg-white transition-all rounded shadow-sm group border-transparent">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-xl font-black uppercase">03. Temporal Logic</span>
                            <i data-lucide="history" class="opacity-50 group-hover:opacity-100"></i>
                        </div>
                        <p class="text-xs font-mono opacity-60">Linear Future vs. Digital Now</p>
                    </button>
                </div>

                <div class="lg:col-span-8 bg-[#F2F0E9] p-8 md:p-12 rounded-xl border-2 border-[#1A4D2E]/10 relative overflow-hidden flex flex-col justify-center scroll-mt-24" id="syntax-content">
                    </div>
            </div>
        </div>
    </section>

    <section id="reflection" class="py-24 px-4 bg-[#1A4D2E] text-[#F2F0E9] min-h-screen flex items-center">
        <div class="container mx-auto max-w-5xl">
            <div class="text-center mb-12">
                <span class="bg-[#FF2E00] text-white px-3 py-1 font-mono text-xs mb-4 inline-block uppercase">Step 03: Macro Level</span>
                <h2 class="text-5xl md:text-6xl font-black uppercase tracking-tighter">Analytical Synthesis</h2>
                <p class="font-mono opacity-60 mt-4">Logic Flow: From Word to Identity</p>
            </div>

            <div class="flex justify-center items-center mb-16 relative">
                <div class="absolute top-1/2 left-0 w-full h-1 bg-white/10 -z-10"></div>
                <div class="absolute top-1/2 left-0 h-1 bg-[#FF2E00] -z-10 transition-all duration-500" id="progress-line" style="width: 0%"></div>

                <div class="flex justify-between w-full max-w-lg">
                    <button onclick="loadReflection(0)" id="step-dot-0" class="step-dot w-10 h-10 rounded-full bg-[#1A4D2E] border-2 border-white/50 flex items-center justify-center font-bold text-sm hover:border-[#FF2E00] transition-all active">1</button>
                    <button onclick="loadReflection(1)" id="step-dot-1" class="step-dot w-10 h-10 rounded-full bg-[#1A4D2E] border-2 border-white/50 flex items-center justify-center font-bold text-sm hover:border-[#FF2E00] transition-all">2</button>
                    <button onclick="loadReflection(2)" id="step-dot-2" class="step-dot w-10 h-10 rounded-full bg-[#1A4D2E] border-2 border-white/50 flex items-center justify-center font-bold text-sm hover:border-[#FF2E00] transition-all">3</button>
                    <button onclick="loadReflection(3)" id="step-dot-3" class="step-dot w-10 h-10 rounded-full bg-[#1A4D2E] border-2 border-white/50 flex items-center justify-center font-bold text-sm hover:border-[#FF2E00] transition-all"><i data-lucide="check" size="16"></i></button>
                </div>
            </div>

            <div id="reflection-stage" class="min-h-[400px] transition-all duration-300">
                </div>

            <div class="flex justify-center gap-4 mt-12">
                <button onclick="prevStep()" class="px-6 py-2 border border-white/30 rounded-full hover:bg-white/10 transition-colors uppercase font-mono text-xs cursor-pointer">Back</button>
                <button onclick="nextStep()" class="px-6 py-2 bg-[#FF2E00] text-white rounded-full hover:bg-[#D42600] transition-colors uppercase font-mono text-xs font-bold shadow-lg shadow-red-900/50 cursor-pointer">Next Step</button>
            </div>
        </div>
    </section>

    <section id="ai" class="bg-[#1A4D2E] text-[#F2F0E9] py-16 px-4 border-t-8 border-[#FF2E00]">
        <div class="container mx-auto max-w-4xl text-center">
            <h2 class="text-2xl font-black uppercase mb-8 flex items-center justify-center gap-3">
                <i data-lucide="bot" class="text-[#FF2E00]"></i> AI Usage Disclosure
            </h2>
            <div class="grid md:grid-cols-3 gap-8 text-sm opacity-80 leading-relaxed text-left">
                <div><span class="font-bold text-[#FF2E00] block mb-2 text-lg">01. Data</span>Python scripts (AI-assisted) used for tokenization.</div>
                <div><span class="font-bold text-[#FF2E00] block mb-2 text-lg">02. Literature</span>AI tools assisted in summarizing texts.</div>
                <div><span class="font-bold text-[#FF2E00] block mb-2 text-lg">03. Code</span>This presentation was developed with Generative AI.</div>
            </div>

            <div class="mt-12 pt-8 border-t border-[#F2F0E9]/10 text-center flex flex-col items-center gap-4">
                <button onclick="document.getElementById('hero').scrollIntoView({behavior: 'smooth'})" class="flex items-center gap-2 font-bold uppercase hover:text-[#FF2E00] transition-colors cursor-pointer text-[#F2F0E9]">
                    <i data-lucide="arrow-up" size="16"></i> Back to Top
                </button>
                <p class="text-xs font-mono opacity-40 text-[#F2F0E9]">
                    Research by Dengjianing Li<br>
                    Limitation: Interpretative analysis of text (2022-2024), not a physical audit.
                </p>
            </div>
        </div>
    </section>

    <script>
        // 1. Data Explorer 数据源
        const dataCenter = {
            hm: {
                color: "#1A4D2E",
                rgb: "26, 77, 46",
                years: {
                    '2022': {
                        focus: "Systemic Compliance",
                        tokens: [{l:"Board",c:348},{l:"Sustainability",c:274},{l:"Financial",c:271},{l:"Business",c:269},{l:"Annual",c:214}],
                        bigrams: [{l:"Supply Chain",c:152},{l:"Hennes Mauritz",c:115},{l:"Demand Driven",c:86},{l:"Driven Supply",c:82}],
                        cats: {Environment:0.62,Labor:0.44,Community:0.19,Innovation:0.31,Risk:0.68,Branding:0.36}
                    },
                    '2023': {
                        focus: "Continuity & Finance",
                        tokens: [{l:"Board",c:358},{l:"Financial",c:288},{l:"Business",c:246},{l:"Sustainability",c:223},{l:"Annual",c:210}],
                        bigrams: [{l:"Supply Chain",c:161},{l:"Hennes Mauritz",c:114},{l:"Demand Driven",c:82},{l:"Board Directors",c:79}],
                        cats: {Environment:0.60,Labor:0.37,Community:0.18,Innovation:0.19,Risk:0.62,Branding:0.35}
                    },
                    '2024': {
                        focus: "Value & Chain",
                        tokens: [{l:"Board",c:387},{l:"Financial",c:381},{l:"Business",c:375},{l:"Value",c:298},{l:"Chain",c:275}],
                        bigrams: [{l:"Board Directors",c:248},{l:"Value Chain",c:150},{l:"Supply Chain",c:123},{l:"Human Rights",c:119}],
                        cats: {Environment:0.96,Labor:0.61,Community:0.21,Innovation:0.25,Risk:0.62,Branding:0.47}
                    }
                }
            },
            shein: {
                color: "#FF2E00",
                rgb: "255, 46, 0",
                years: {
                    '2022': {
                        focus: "Impact & Production",
                        tokens: [{l:"Sustainability",c:106},{l:"Impact",c:96},{l:"Waste",c:93},{l:"Social",c:87},{l:"Suppliers",c:76}],
                        bigrams: [{l:"Sustainability Social",c:66},{l:"Social Impact",c:66},{l:"Waste Less",c:46},{l:"Equitable",c:43}],
                        cats: {Environment:1.47,Labor:1.06,Community:0.63,Innovation:0.87,Risk:0.65,Branding:1.29}
                    },
                    '2023': {
                        focus: "Emerging Empowerment",
                        tokens: [{l:"Suppliers",c:134},{l:"Sustainability",c:120},{l:"Impact",c:119},{l:"Social",c:107},{l:"Chain",c:94}],
                        bigrams: [{l:"Social Impact",c:86},{l:"Sustainability Social",c:82},{l:"Supply Chain",c:74},{l:"Governance",c:56}],
                        cats: {Environment:1.29,Labor:1.52,Community:0.60,Innovation:0.83,Risk:0.61,Branding:1.09}
                    },
                    '2024': {
                        focus: "Platform Ecosystem",
                        tokens: [{l:"Impact",c:270},{l:"Sustainability",c:242},{l:"People",c:223},{l:"Suppliers",c:210},{l:"Social",c:200}],
                        bigrams: [{l:"Social Impact",c:153},{l:"Sustainability Social",c:148},{l:"Governance Annex",c:105},{l:"Process",c:100}],
                        cats: {Environment:1.45,Labor:1.18,Community:0.59,Innovation:0.52,Risk:0.72,Branding:1.08}
                    }
                }
            }
        };

        // 2. Syntax Strategies Data (定性分析内容)
        const strategies = {
            voice: {
                title: "Voice & Agency",
                desc: "Does the text hide or highlight the actor?",
                hm: {
                    title: "The Passive Manager",
                    style: "Passive Voice",
                    example: "\"Audits were conducted to verify compliance.\"",
                    analysis: "Removes the human element. The 'System' is watching itself. This creates an impression of objectivity and distance."
                },
                shein: {
                    title: "Active Digital Storytelling",
                    style: "Active Voice (We + Verb)",
                    example: "\"We empower designers to make sustainable choices.\"",
                    analysis: "Dynamic verbs mimic tech-startup language. Shifts focus from 'policing' to 'enabling'. High agency."
                }
            },
            power: {
                title: "Power Dynamics",
                desc: "How is the relationship between company and supplier defined?",
                hm: {
                    title: "Disciplinary Society",
                    style: "Commanding Tone (Shall / Must)",
                    example: "\"The supplier shall keep proper records...\"",
                    analysis: "Vertical hierarchy. H&M is the 'Regulator' or 'Policeman'. Visibility is one-way (unannounced visits)."
                },
                shein: {
                    title: "Networked Society",
                    style: "Ecosystem Metaphors",
                    example: "\"Unlocking potential across our ecosystem.\"",
                    analysis: "Horizontal network. Suppliers are rebranded as 'partners'. Power is diffuse, avoiding direct liability."
                }
            },
            time: {
                title: "Temporal Logic",
                desc: "How does the text construct time and the future?",
                hm: {
                    title: "Industrial Time",
                    style: "Linear / Long-term",
                    example: "\"Roadmap 2030\", \"Long-term goals\"",
                    analysis: "Asks for patience. Justifies current pollution by promising a better future. Change is slow and structural."
                },
                shein: {
                    title: "Digital Time",
                    style: "Instant / On-demand",
                    example: "\"Rapid\", \"Now\", \"EvoluSHEIN\"",
                    analysis: "Matches instant gratification. Sustainability is an 'update' or 'feature' that happens now. Constant beta mode."
                }
            }
        };

        // 3. 全局状态
        let currentBrand = 'hm';
        let currentYear = '2022';

        // 4. Data Explorer 逻辑
        function switchBrand(brand) {
            currentBrand = brand;
            const hmBtn = document.getElementById('btn-hm');
            const sheinBtn = document.getElementById('btn-shein');
            
            if (brand === 'hm') {
                hmBtn.className = "p-6 text-left border-t-8 transition-all bg-white shadow-xl border-[#1A4D2E] cursor-pointer";
                sheinBtn.className = "p-6 text-left border-t-8 transition-all bg-[#FF2E00]/5 border-transparent opacity-60 hover:opacity-100 cursor-pointer";
            } else {
                hmBtn.className = "p-6 text-left border-t-8 transition-all bg-[#1A4D2E]/5 border-transparent opacity-60 hover:opacity-100 cursor-pointer";
                sheinBtn.className = "p-6 text-left border-t-8 transition-all bg-white shadow-xl border-[#FF2E00] cursor-pointer";
            }
            document.getElementById('data-panel').style.borderColor = dataCenter[brand].color;
            document.querySelectorAll('.year-btn').forEach(btn => {
                if(btn.classList.contains('opacity-100')) btn.style.color = dataCenter[brand].color;
            });
            renderCharts();
        }

        function switchYear(year) {
            currentYear = year;
            const themeColor = dataCenter[currentBrand].color;
            document.querySelectorAll('.year-btn').forEach(btn => {
                if (btn.id === `year-${year}`) {
                    btn.classList.remove('opacity-30', 'border-transparent');
                    btn.classList.add('opacity-100', 'border-current');
                    btn.style.color = themeColor;
                } else {
                    btn.classList.add('opacity-30', 'border-transparent');
                    btn.classList.remove('opacity-100', 'border-current');
                    btn.style.color = '#000';
                }
            });
            renderCharts();
        }

        function renderCharts() {
            const data = dataCenter[currentBrand].years[currentYear];
            const color = dataCenter[currentBrand].color;
            const brandRgb = dataCenter[currentBrand].rgb;
            const container = document.getElementById('charts-container');
            const themeText = document.getElementById('theme-text');

            themeText.innerText = data.focus;
            themeText.style.color = color;

            // 渲染 Tokens
            let tokenHTML = `<div><div class="flex items-center gap-2 mb-6" style="color:${color}"><i data-lucide="database" size="20"></i><h5 class="font-bold uppercase">Top 5 Tokens</h5></div>`;
            data.tokens.forEach(t => {
                tokenHTML += `<div class="mb-3"><div class="flex justify-between items-end mb-1"><span class="font-bold text-xs uppercase">${t.l}</span><span class="font-mono text-[10px] opacity-60">${t.c}</span></div><div class="w-full bg-gray-100 h-2 rounded-sm overflow-hidden"><div class="h-full transition-all duration-1000" style="width:${(t.c/400)*100}%; background-color:${color}"></div></div></div>`;
            });
            tokenHTML += `</div>`;

            // 渲染 Bigrams
            let bigramHTML = `<div><div class="flex items-center gap-2 mb-6" style="color:${color}"><i data-lucide="layers" size="20"></i><h5 class="font-bold uppercase">Top 5 Bigrams</h5></div>`;
            data.bigrams.forEach(t => {
                bigramHTML += `<div class="mb-3"><div class="flex justify-between items-end mb-1"><span class="font-bold text-xs uppercase">${t.l}</span><span class="font-mono text-[10px] opacity-60">${t.c}</span></div><div class="w-full bg-gray-100 h-2 rounded-sm overflow-hidden"><div class="h-full transition-all duration-1000" style="width:${(t.c/200)*100}%; background-color:${color}"></div></div></div>`;
            });
            bigramHTML += `</div>`;

            // 渲染 SVG 饼图
            let catTotal = 0;
            const catEntries = Object.entries(data.cats).sort((a,b) => b[1] - a[1]); 
            catEntries.forEach(([k,v]) => catTotal += v);
            let cumulativePercent = 0;
            let svgPaths = '';
            let labelsHTML = '';
            catEntries.forEach(([key, val], index) => {
                const percent = val / catTotal;
                const permillage = (val * 10).toFixed(1); 
                const startX = Math.cos(2 * Math.PI * cumulativePercent) * 100 + 100;
                const startY = Math.sin(2 * Math.PI * cumulativePercent) * 100 + 100;
                const endX = Math.cos(2 * Math.PI * (cumulativePercent + percent)) * 100 + 100;
                const endY = Math.sin(2 * Math.PI * (cumulativePercent + percent)) * 100 + 100;
                const largeArcFlag = percent > 0.5 ? 1 : 0;
                const pathData = `M 100 100 L ${startX} ${startY} A 100 100 0 ${largeArcFlag} 1 ${endX} ${endY} Z`;
                const opacity = 1 - (index * 0.15); 
                svgPaths += `<path d="${pathData}" fill="rgba(${brandRgb}, ${opacity})" stroke="white" stroke-width="2" class="pie-slice" />`;
                labelsHTML += `<div class="flex items-center justify-between group cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors"><div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full" style="background-color: rgba(${brandRgb}, ${opacity})"></div><span class="text-xs font-bold uppercase" style="color:${color}">${key}</span></div><span class="text-xs font-mono font-bold opacity-60">${permillage}‰</span></div>`;
                cumulativePercent += percent;
            });
            const pieChartHTML = `<div><div class="flex items-center gap-2 mb-6" style="color:${color}"><i data-lucide="layout-grid" size="20"></i><h5 class="font-bold uppercase">Category Focus (‰)</h5></div><div class="flex flex-row items-center gap-4"><div class="w-32 h-32 flex-shrink-0"><svg viewBox="0 0 200 200" class="transform -rotate-90 w-full h-full overflow-visible drop-shadow-xl">${svgPaths}</svg></div><div class="flex-grow space-y-1">${labelsHTML}</div></div></div>`;

            container.innerHTML = tokenHTML + bigramHTML + pieChartHTML;
            lucide.createIcons();
        }

        // 5. Syntax Decoder 逻辑
        function loadStrategy(key) {
            // 更新按钮状态
            document.querySelectorAll('.strategy-btn').forEach(btn => {
                btn.classList.remove('active', 'border-l-8', 'border-[#FF2E00]', 'bg-[#1A4D2E]', 'text-[#F2F0E9]');
                btn.classList.add('bg-gray-50', 'text-gray-900', 'border-transparent');
            });
            const activeBtn = document.getElementById('btn-' + key);
            activeBtn.classList.remove('bg-gray-50', 'text-gray-900', 'border-transparent');
            activeBtn.classList.add('active', 'bg-[#1A4D2E]', 'text-[#F2F0E9]', 'border-l-8', 'border-[#FF2E00]');

            // 更新内容
            const data = strategies[key];
            const contentDiv = document.getElementById('syntax-content');
            
            contentDiv.innerHTML = `
                <div class="flex flex-col h-full justify-between fade-in">
                    <div class="mb-8">
                        <h3 class="text-3xl font-black uppercase text-[#1A4D2E] mb-2">${data.title}</h3>
                        <p class="font-mono text-gray-500">${data.desc}</p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8 h-full">
                        <div class="bg-white p-8 rounded-lg shadow-lg border-t-8 border-[#1A4D2E] relative group hover:-translate-y-1 transition-transform duration-300">
                            <div class="absolute top-4 right-4 opacity-10 font-black text-6xl text-[#1A4D2E]">H&M</div>
                            <h4 class="text-xl font-bold uppercase text-[#1A4D2E] mb-1">${data.hm.title}</h4>
                            <span class="inline-block px-2 py-1 bg-[#1A4D2E]/10 text-[#1A4D2E] text-xs font-mono font-bold mb-6">${data.hm.style}</span>
                            
                            <div class="mb-6 relative">
                                <i data-lucide="quote" class="absolute -top-3 -left-2 text-[#1A4D2E] opacity-20 w-8 h-8"></i>
                                <p class="font-serif text-lg italic pl-4 text-gray-800 leading-relaxed">${data.hm.example}</p>
                            </div>
                            
                            <div class="pt-6 border-t border-dashed border-gray-200">
                                <p class="text-sm text-gray-600 leading-relaxed"><strong class="text-[#1A4D2E]">Analysis:</strong> ${data.hm.analysis}</p>
                            </div>
                        </div>

                        <div class="bg-white p-8 rounded-lg shadow-lg border-t-8 border-[#FF2E00] relative group hover:-translate-y-1 transition-transform duration-300">
                            <div class="absolute top-4 right-4 opacity-10 font-black text-6xl text-[#FF2E00]">SHEIN</div>
                            <h4 class="text-xl font-bold uppercase text-[#FF2E00] mb-1">${data.shein.title}</h4>
                            <span class="inline-block px-2 py-1 bg-[#FF2E00]/10 text-[#FF2E00] text-xs font-mono font-bold mb-6">${data.shein.style}</span>
                            
                            <div class="mb-6 relative">
                                <i data-lucide="quote" class="absolute -top-3 -left-2 text-[#FF2E00] opacity-20 w-8 h-8"></i>
                                <p class="font-serif text-lg italic pl-4 text-gray-800 leading-relaxed">${data.shein.example}</p>
                            </div>
                            
                            <div class="pt-6 border-t border-dashed border-gray-200">
                                <p class="text-sm text-gray-600 leading-relaxed"><strong class="text-[#FF2E00]">Analysis:</strong> ${data.shein.analysis}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            lucide.createIcons();
            
            // 滚动到该区域
            contentDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // 6. Reflection Stepper 逻辑
        const reflectionSteps = [
            {
                label: "The Word",
                content: `
                    <div class="text-center fade-in">
                        <div class="inline-block p-4 rounded-full bg-white/10 mb-6 border border-white/20"><i data-lucide="database" size="32" class="text-[#FF2E00]"></i></div>
                        <h3 class="text-4xl font-black uppercase text-[#F2F0E9] mb-4">01. The Word</h3>
                        <p class="font-mono text-sm opacity-50 uppercase mb-8">Lexical Choice</p>
                        
                        <div class="grid md:grid-cols-2 gap-8 max-w-3xl mx-auto text-left">
                            <div class="bg-white/5 p-6 rounded-lg border border-white/10 hover:bg-white/10 transition-colors">
                                <h4 class="font-bold text-[#FF2E00] mb-2 uppercase text-xs tracking-widest">H&M Keywords</h4>
                                <div class="text-2xl font-bold mb-2">"Audit", "Board", "Taxonomy"</div>
                                <p class="text-sm opacity-60">Focus on systemic oversight and legal compliance.</p>
                            </div>
                            <div class="bg-white/5 p-6 rounded-lg border border-white/10 hover:bg-white/10 transition-colors">
                                <h4 class="font-bold text-[#FF2E00] mb-2 uppercase text-xs tracking-widest">SHEIN Keywords</h4>
                                <div class="text-2xl font-bold mb-2">"Empower", "Partner", "Unlock"</div>
                                <p class="text-sm opacity-60">Focus on relational connection and digital opportunity.</p>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                label: "The Sentence",
                content: `
                    <div class="text-center fade-in">
                        <div class="inline-block p-4 rounded-full bg-white/10 mb-6 border border-white/20"><i data-lucide="align-left" size="32" class="text-[#FF2E00]"></i></div>
                        <h3 class="text-4xl font-black uppercase text-[#F2F0E9] mb-4">02. The Sentence</h3>
                        <p class="font-mono text-sm opacity-50 uppercase mb-8">Syntactic Structure</p>
                        
                        <div class="grid md:grid-cols-2 gap-8 max-w-3xl mx-auto text-left">
                            <div class="bg-white/5 p-6 rounded-lg border border-white/10 hover:bg-white/10 transition-colors">
                                <h4 class="font-bold text-[#FF2E00] mb-2 uppercase text-xs tracking-widest">H&M Syntax</h4>
                                <div class="text-2xl font-bold mb-2">Passive Voice</div>
                                <p class="text-sm opacity-60">"Audits were conducted..." creates distance and authority.</p>
                            </div>
                            <div class="bg-white/5 p-6 rounded-lg border border-white/10 hover:bg-white/10 transition-colors">
                                <h4 class="font-bold text-[#FF2E00] mb-2 uppercase text-xs tracking-widest">SHEIN Syntax</h4>
                                <div class="text-2xl font-bold mb-2">Active Voice</div>
                                <p class="text-sm opacity-60">"We empower..." creates intimacy and speed.</p>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                label: "The Identity",
                content: `
                    <div class="text-center fade-in">
                        <div class="inline-block p-4 rounded-full bg-white/10 mb-6 border border-white/20"><i data-lucide="fingerprint" size="32" class="text-[#FF2E00]"></i></div>
                        <h3 class="text-4xl font-black uppercase text-[#F2F0E9] mb-4">03. The Identity</h3>
                        <p class="font-mono text-sm opacity-50 uppercase mb-8">Discursive Construction</p>
                        
                        <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto text-left">
                            <div class="bg-[#F2F0E9] text-[#1A4D2E] p-8 rounded-lg shadow-xl border-t-8 border-[#1A4D2E]">
                                <h4 class="text-xl font-black uppercase mb-2">H&M</h4>
                                <p class="font-serif italic text-lg mb-4">"The Institutional Regulator"</p>
                                <p class="text-sm opacity-80">Identity built on <strong>Rules & Stability</strong>.</p>
                            </div>
                            <div class="bg-[#F2F0E9] text-[#1A4D2E] p-8 rounded-lg shadow-xl border-t-8 border-[#FF2E00]">
                                <h4 class="text-xl font-black uppercase text-[#FF2E00] mb-2">SHEIN</h4>
                                <p class="font-serif italic text-lg mb-4">"The Digital Platform"</p>
                                <p class="text-sm opacity-80">Identity built on <strong>Speed & Opportunity</strong>.</p>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                label: "Verdict",
                content: `
                    <div class="text-center fade-in flex flex-col items-center justify-center h-full">
                        <div class="inline-block p-4 rounded-full bg-[#FF2E00] mb-8 shadow-[0_0_20px_#FF2E00] animate-pulse"><i data-lucide="scale" size="48" class="text-white"></i></div>
                        <h3 class="text-5xl font-black uppercase text-[#F2F0E9] mb-8 tracking-tighter">Final Verdict</h3>
                        
                        <div class="max-w-3xl p-8 border-y-2 border-[#FF2E00]/30 bg-white/5">
                            <p class="text-2xl font-serif italic leading-relaxed text-[#F2F0E9]">
                                "Corporate 'conscience' is not an inherent quality but a strategically constructed image. We are witnessing a discursive shift from the era of Institutional Control to one of Platform Empowerment."
                            </p>
                        </div>
                        <p class="mt-8 font-mono text-sm opacity-40">End of Analysis</p>
                    </div>
                `
            }
        ];

        let currentReflectionStep = 0;

        function loadReflection(index) {
            currentReflectionStep = index;
            // 更新进度条
            const percent = (index / (reflectionSteps.length - 1)) * 100;
            document.getElementById('progress-line').style.width = percent + '%';

            // 更新 Dots
            document.querySelectorAll('.step-dot').forEach((dot, idx) => {
                if (idx === index) {
                    dot.classList.add('active');
                    dot.classList.remove('bg-[#1A4D2E]', 'border-white/50');
                    dot.classList.add('bg-[#FF2E00]', 'border-[#FF2E00]');
                } else if (idx < index) {
                    dot.classList.remove('active', 'border-white/50');
                    dot.classList.add('bg-[#FF2E00]', 'border-[#FF2E00]');
                } else {
                    dot.classList.remove('active', 'bg-[#FF2E00]', 'border-[#FF2E00]');
                    dot.classList.add('bg-[#1A4D2E]', 'border-white/50');
                }
            });

            // 更新内容
            const stage = document.getElementById('reflection-stage');
            stage.style.opacity = '0';
            setTimeout(() => {
                stage.innerHTML = reflectionSteps[index].content;
                stage.style.opacity = '1';
                lucide.createIcons();
            }, 300);
        }

        function nextStep() {
            if (currentReflectionStep < reflectionSteps.length - 1) {
                loadReflection(currentReflectionStep + 1);
            }
        }

        function prevStep() {
            if (currentReflectionStep > 0) {
                loadReflection(currentReflectionStep - 1);
            }
        }

        // 初始化
        window.onload = function() {
            lucide.createIcons();
            renderCharts();
            switchBrand('hm');
            loadStrategy('voice');
            loadReflection(0);
        };
    </script>
</body>
</html>